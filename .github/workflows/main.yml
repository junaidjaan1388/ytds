name: Multi-Profile TikTok Downloader

on:
  workflow_dispatch:
  schedule:
    - cron: '0 6 * * *'  # Daily at 6 AM

env:
  PROFILES: |
    sufi_vibes780
    another_profile
    third_profile

jobs:
  download-all:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        profile: ['sufi_vibes780']  # Add more profiles here
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Download for profile ${{ matrix.profile }}
      run: |
        pip3 install yt-dlp
        mkdir -p ${{ matrix.profile }}
        yt-dlp \
          --ignore-errors \
          --no-warnings \
          -f "best[ext=mp4]" \
          -o "${{ matrix.profile }}/%(title).100s.%(ext)s" \
          "https://www.tiktok.com/@${{ matrix.profile }}"
      
    - name: Upload profile videos
      uses: actions/upload-artifact@v4
      with:
        name: ${{ matrix.profile }}-videos
        path: ${{ matrix.profile }}/
